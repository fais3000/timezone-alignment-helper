<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timezone Alignment Tool</title>
    <link rel="stylesheet" href="style.css">
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- D3.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <!-- TopoJSON -->
    <script src="https://unpkg.com/topojson@3"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="min-h-screen bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <i data-lucide="globe" class="w-8 h-8 text-blue-600"></i>
                    <h1 class="text-3xl font-bold text-gray-900">Timezone Alignment Tool</h1>
                </div>
                <button id="settings-btn" class="flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors">
                    <i data-lucide="settings" class="w-4 h-4"></i>
                    <span>Settings</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Settings Modal -->
    <div id="settings-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-gray-900">Working Hours Settings</h3>
                <button id="close-settings" class="p-1 hover:bg-gray-100 rounded">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        Start Hour (Eastern Time)
                    </label>
                    <select id="start-hour" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        End Hour (Eastern Time)
                    </label>
                    <select id="end-hour" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        <!-- Options will be populated by JavaScript -->
                    </select>
                </div>
            </div>

            <div class="flex gap-3 mt-6">
                <button id="cancel-settings" class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50">
                    Cancel
                </button>
                <button id="save-settings" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
                    Save
                </button>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- User Location and Target Schedule -->
        <div class="mb-8 space-y-6">
            <!-- Current Location -->
            <div class="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
                <h2 class="text-lg font-semibold text-gray-900 mb-2">Your Current Location</h2>
                <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                    <span id="user-location" class="text-gray-700">Detecting...</span>
                    <span class="text-gray-500">â€¢</span>
                    <span id="user-time" class="text-gray-700">--:--:--</span>
                </div>
            </div>

            <!-- Target Schedule -->
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white shadow-lg">
                <h2 class="text-xl font-bold mb-3">Target Working Hours</h2>
                <div class="flex items-center gap-4 flex-wrap">
                    <div class="bg-white/20 rounded-lg px-4 py-2">
                        <div class="text-sm opacity-90">Hours (ET)</div>
                        <div id="working-hours-display" class="text-lg font-bold">12:00 PM - 5:00 PM ET</div>
                    </div>
                    <div class="flex items-center gap-2">
                        <i data-lucide="clock" class="w-4 h-4"></i>
                        <div>
                            <div class="text-sm opacity-90">Current ET</div>
                            <div id="eastern-time" class="font-semibold">--:--:--</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Search and Filters -->
        <div class="mb-6 flex flex-col sm:flex-row gap-3">
            <div class="relative flex-1">
                <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"></i>
                <input id="search-input" type="text" placeholder="Search countries or cities..." class="w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="flex gap-2">
                <button id="filter-all" class="px-4 py-2 rounded-lg font-medium transition-colors bg-blue-600 text-white">
                    All
                </button>
                <button id="filter-good" class="px-4 py-2 rounded-lg font-medium transition-colors bg-white text-gray-700 border border-gray-300 hover:bg-gray-50">
                    Good+
                </button>
            </div>
        </div>

        <!-- World Map -->
        <div id="world-map" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4">
            <div class="mb-4">
                <h3 class="text-lg font-bold text-gray-900 mb-1">Timezone Alignment Map</h3>
                <p class="text-sm text-gray-600">Cities colored by alignment with 12pm-5pm ET schedule (favoring early morning local times)</p>
            </div>

            <div class="relative bg-blue-50 rounded-lg overflow-hidden mb-4">
                <svg id="map-svg" width="100%" height="400" viewBox="0 0 1000 400" class="w-full h-auto"></svg>

                <!-- City Info Panel -->
                <div id="info-panel" class="absolute top-4 right-4 bg-white rounded-lg shadow-lg border border-gray-200 p-3 max-w-xs z-10 hidden">
                    <!-- Content will be populated by JavaScript -->
                </div>
            </div>

            <!-- Stats Only -->
            <div class="text-center">
                <h4 class="font-medium text-gray-900 mb-2">Stats</h4>
                <div class="flex justify-center gap-6 text-sm text-gray-600">
                    <div>Total: <span id="total-cities" class="font-medium text-gray-900">0</span></div>
                    <div>Perfect: <span id="perfect-count" class="font-medium text-green-700">0</span></div>
                    <div>Good: <span id="good-count" class="font-medium text-yellow-700">0</span></div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
    </script>
</body>
</html>